---
import About from "../components/About.astro";
import Bonus from "../components/Bonus.astro";
import CTA from "../components/CTA.astro";
import Depos from "../components/Depos.astro";
import FAQ from "../components/FAQ.astro";
import Furadeira from "../components/Furadeira.astro";
import PreCheckout from "../components/Precheckout.astro";
import YoutubePlayer from "../components/yt-player";
import Layout from "../layouts/Layout.astro";
import { createId } from "@paralleldrive/cuid2";

let uuid = createId();
if (!Astro.cookies.get("uuid")) {
  Astro.cookies.set("uuid", uuid);
}
let clientUuid = Astro.cookies.get("uuid");
// console.log(clientUuid);
let today = new Date();
let expirationDate = new Date("2025-05-02T10:00:00-03:00");
let warningText = "Oferta v√°lida at√© √†s 23:59 de 12 de Maio";
---

<Layout>
  <main class="max-w-[1080px] mx-auto">
    <section class="w-full bg-blue p-4 text-cream rounded-lg shadow-lg">
      <div class="flex flex-col items-center text-center gap-4">
        <div class="w-[180px] sm:w-[300px]">
          <img
            src="/logo-portrait-v2.svg"
            alt="logo"
            width={300}
            height={120}
          />
        </div>
        <div class="text-6xl">
          <h1
            class="text-3xl sm:text-5xl font-extrabold text-amber-100 uppercase text-cream"
          >
            Oferta Especial de <br />
            <span class="text-red-400 sm:text-7xl"> Dia das M√£es </span>
            <br />
            <span class="text-green sm:text-7xl"> LactoFlow </span>
          </h1>
        </div>

        <div class="mt-4">
          <h2 class="text-2xl font-semibold mb-2">
            üë∂ Voc√™ n√£o precisa de mais flores nesse Dia das M√£es
          </h2>
          <div class="card bg-cream text-blue font-black shadow-lg">
            <div class="card-body flex flex-col items-center">
              <p class="text-lg">Precisa de confian√ßa.</p>
              <p class="text-lg">Precisa de leite.</p>
              <p class="text-lg">Precisa de apoio real.</p>
            </div>
          </div>
        </div>

        <div class="mt-4 flex flex-col items-center">
          <h2 class="text-2xl font-semibold mb-2">
            üß° Por isso eu criei a{" "}
            <span class="font-bold">
              Oferta Especial de Dia das M√£es do LactoFlow
            </span>
          </h2>
          <div class="card bg-cream text-blue shadow-lg">
            <div class="card-body flex flex-col items-start">
              <p class="text-left text-2xl font-semibold mb-2">
                Para m√£es que:
              </p>
              <ul class="list-none text-left text-lg space-y-1">
                <li>
                  ‚Äì Querem produzir mais <span class="font-semibold">leite</span
                  >
                </li>
                <li>
                  ‚Äì Est√£o usando <span class="font-semibold">f√≥rmula</span>, mas
                  querem parar
                </li>
                <li>
                  ‚Äì Est√£o voltando ao <span class="font-semibold">trabalho</span
                  > e querem montar um
                  <span class="font-semibold">estoque</span>
                </li>
                <li>
                  ‚Äì Ou est√£o <span class="font-semibold">gr√°vidas</span> e querem
                  se preparar com <span class="font-semibold">seguran√ßa</span>
                </li>
              </ul>
            </div>
          </div>

          <div class="mt-4">
            <div class="card bg-cream text-blue shadow-lg">
              <div class="card-body flex flex-col items-start">
                <h2 class="text-left text-2xl font-semibold mb-2">
                  ‚úÖ O que voc√™ vai receber ao entrar no LactoFlow:
                </h2>
                <ul class="list-none text-left text-lg space-y-1">
                  <li>
                    - Acesso imediato ao <span class="font-semibold"
                      >curso completo</span
                    >, sem pegadinhas
                  </li>
                  <li>
                    - Um plano claro e direto para voc√™ <span
                      class="font-semibold">recuperar sua produ√ß√£o</span
                    >
                  </li>
                  <li>
                    - Suporte di√°rio comigo na <span class="font-semibold"
                      >comunidade exclusiva</span
                    >
                  </li>
                  <li>
                    - 2 encontros <span class="font-semibold">ao vivo</span> por
                    m√™s
                  </li>
                  <li>
                    - Acompanhamento durante toda a sua <span
                      class="font-semibold">jornada</span
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="mt-4 card bg-cream text-blue shadow-lg">
            <div class="card-body flex flex-col items-start">
              <h2 class="text-left text-2xl font-semibold mb-2">
                üéÅ B√îNUS EXCLUSIVOS dessa edi√ß√£o especial:
              </h2>
              <ul
                class="list-none text-lg space-y-1 text-left max-w-lg mx-auto pl-4"
              >
                <li>
                  üéì{" "}
                  <span class="font-semibold">
                    Aula ao vivo: Plano Anti-F√≥rmula
                  </span>
                  <br /> Como eliminar a f√≥rmula com seguran√ßa e recuperar sua produ√ß√£o
                  <div class="mt-4"></div>
                  <li class="mt-2">
                    üë©‚Äçüçº <span class="font-semibold">Workshop para Gestantes</span
                    >
                    <br /> Prepara√ß√£o emocional, pr√°tica e segura antes do beb√™ nascer
                  </li>
                  <li class="mt-2">
                    üì¶{" "}
                    <span class="font-semibold">
                      Workshop de Estoque de Leite Materno
                    </span>
                    <br /> Como organizar a rotina, iniciar o estoque e se preparar
                    pra volta ao trabalho sem desmamar
                  </li>

                  <li class="mt-2">
                    üåô <span class="font-semibold"
                      >Workshop de Desmame Noturno</span
                    >
                    <br /> Pra m√£es que querem continuar amamentando e tamb√©m dormir
                    melhor
                  </li>
                  <li class="mt-2">
                    üßò‚Äç‚ôÄÔ∏è{" "}
                    <span class="font-semibold"
                      >Medita√ß√£o Guiada ‚Äì Meu Corpo Produz</span
                    >
                    <br /> Pra se conectar com seu corpo e confiar na sua produ√ß√£o
                  </li>
                  <li class="mt-2">
                    üìÑ <span class="font-semibold">PDFs b√¥nus:</span>
                    <ul class="list-disc pl-5 mt-1">
                      <li>Como saber se o beb√™ est√° mamando bem</li>
                      <li>Di√°rio de fraldas do rec√©m-nascido</li>
                      <li>Manual da pega correta</li>
                    </ul>
                  </li>
                </li>
              </ul>
            </div>
          </div>

          <div class="mt-4">
            <div class="card bg-cream text-blue shadow-lg">
              <div class="card-body flex flex-col items-center">
                <h2 class="text-2xl font-semibold mb-2">
                  üí∞ Investimento com valor especial de Dia das M√£es:
                </h2>
                <p class="text-lg">
                  De <span class="line-through">R$297</span> por{" "}
                  <span class="text-green font-bold text-2xl"
                    >R$227 √† vista</span
                  >
                </p>
                <p class="text-lg">ou 12x de R$23,48</p>
                <p class="text-md mt-2">
                  üìÜ {warningText}
                </p>
                <!-- <p class="text-md">
                  üì¶ Os b√¥nus saem do ar ap√≥s esse per√≠odo e o valor volta ao
                  original
                </p> -->
              </div>
            </div>

            <div class="mt-4">
              <h2 class="text-2xl font-semibold mb-2">
                üí¨ Esse √© o presente que voc√™ merece:
              </h2>
              <div class="card bg-cream text-blue shadow-lg">
                <div class="card-body flex flex-col items-center">
                  <p class="text-lg">N√£o √© mais uma flor.</p>
                  <p class="text-lg">√â um plano.</p>
                  <p class="text-lg">√â apoio.</p>
                  <p class="text-lg">√â autonomia.</p>
                  <p class="text-lg">√â o seu leite. Com confian√ßa.</p>
                </div>
              </div>
            </div>
          </div>

          <hr class="w-7/8 border-cream my-4" />
          <div class="mt-4">
            <a
              href="https://pay.hotmart.com/O84147403X?off=iz9e8l99&bid=1746040212378"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-block bg-green hover:bg-green-dark text-blue font-bold py-3 px-6 rounded-lg text-xl transition duration-300"
            >
              üëâ QUERO ENTRAR NO LACTOFLOW AGORA
            </a>
            <p class="text-md mt-2">
              Garanta sua vaga e receba todos os b√¥nus da campanha especial.
            </p>
          </div>
          <hr class="w-7/8 border-cream my-4" />
        </div>
      </div>
      <div class="flex flex-col items-center">
        <p
          class="mx-auto w-[80%] max-w-[600px] text-amber-50 text-center text-[16.67px] font-bold leading-[22.9px] sm:mt-7 sm:px-2 lg:mt-5 lg:text-[18.75px]"
        >
          Assista a essa aula gratuita e comece a aumentar a sua produ√ß√£o de
          leite HOJE MESMO
        </p>
        <div class="flex flex-col items-center lg:flex-row">
          <div class="flex items-center">
            <div class="m-2">
              <img
                class="ml-2 animate-bounce"
                src="/arrow-down.svg"
                alt="one"
                height={36}
                width={36}
              />
            </div>
          </div>
        </div>
      </div>

      <YoutubePlayer client:load />

      <script>
        import { isModalOpen, ctaValue } from "../store";

        const modal = document.getElementById("modal") as HTMLDivElement;

        function openModal(cta: string) {
          // add cta to url params
          //add cta to input hidden
          const form = document.querySelector("form");
          if (form) {
            const ctaInput = form.querySelector('input[name="cta"]');
            if (ctaInput) {
              ctaInput.setAttribute("value", cta);
            }
          }

          ctaValue.set(cta);
          if (!modal) return;

          modal.classList.remove("hidden");
        }
        function closeModal() {
          if (!modal) return;
          modal.classList.add("hidden");
        }
        isModalOpen.set(false);
        function redirectToHotmart() {
          window.location.href =
            "https://pay.hotmart.com/O84147403X?off=iz9e8l99";
        }

        const cta1 = document.getElementById("1");
        if (cta1) cta1.addEventListener("click", () => redirectToHotmart());

        const cta2 = document.getElementById("2");
        if (cta2) cta2.addEventListener("click", () => redirectToHotmart());

        const cta3 = document.getElementById("3");
        if (cta3) cta3.addEventListener("click", () => redirectToHotmart());

        const cta4 = document.getElementById("4");
        if (cta4) cta4.addEventListener("click", () => redirectToHotmart());

        const closeBtn = document.getElementById("close");
        if (closeBtn) closeBtn.addEventListener("click", () => closeModal());
      </script>

      <div class="flex flex-col items-center space-y-4">
        <!-- <CTA ctaOption="1" /> -->
        <Depos />
        <CTA
          ctaOption="2"
          price
          label="Voc√™ tamb√©m pode aumentar a sua produ√ß√£o"
          installments={"12"}
          installmentValue={"23,48"}
          total={"227,00"}
        />
        <Furadeira />
        <Bonus />
        <CTA
          ctaOption="3"
          price
          label="Tenha acesso a tudo isso agora"
          installments={"12"}
          installmentValue={"23,48"}
          total={"227,00"}
        />
        <About />
        <FAQ />
        <CTA
          ctaOption="4"
          price
          label="Quero aumentar minha produ√ß√£o de leite"
          installments={"12"}
          installmentValue={"23,48"}
          total={"227,00"}
        />
        <div class="flex flex-col text-center sm:flex-row sm:text-left">
          <span>Copyright ¬© {new Date().getFullYear()}</span>
          <span class="mx-3 hidden sm:block">|</span>
          <span>Todos os direitos reservados.</span>
        </div>
      </div>

      <div
        id="modal"
        class="hidden fixed inset-0 flex items-start justify-center bg-blue/70 z-10"
      >
        <div
          class="mt-4 w-full max-w-md transform overflow-hidden rounded-2xl bg-green p-6 text-left align-middle shadow-xl transition-all"
        >
          <button
            id="close"
            class="text-gray-500 absolute top-2 text-2xl right-6">‚úñ</button
          >
          <PreCheckout clientID={clientUuid?.value} />
        </div>
      </div>
    </section>
  </main>
</Layout>
